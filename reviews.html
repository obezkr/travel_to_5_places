<!DOCTYPE html>
<html>
<head>
  <title>Система відгуків</title>
  <meta charset="UTF-8">
  <script charset="UTF-8" src="scripts/current_date.js"></script>
  <link rel="stylesheet" type="text/css" href="styles.css">
  <script>

    function addReview() {
      var name = document.getElementById('name').value; 
      var comment = document.getElementById('comment').value;
      

      if (name.trim() === '' || comment.trim() === '') {
        alert('Fill all fields.');
        return;
      }
      

      var xhr = new XMLHttpRequest();
      xhr.open('POST', 'scripts/save_reviews.js', true); 
      xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
          document.getElementById('name').value = '';
          document.getElementById('comment').value = '';
          

          getReviews();
        }
      };
      

      xhr.send('name=' + encodeURIComponent(name) + '&comment=' + encodeURIComponent(comment));
    }
    
    function getReviews() {
      var xhr = new XMLHttpRequest();
      xhr.open('GET', 'scripts/get_reviews.js', true); 
      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
          var reviewList = document.getElementById('review-list');
          reviewList.innerHTML = xhr.responseText; 
        }
      };
      xhr.send();
    }
  </script>
</head>
<body onload="displayCurrentDate()">
	<header>
		<nav>
			<ul>
				<li><a href="index.html">Home</a></li>
				<li><a href="destinations.html">Destinations</a></li>
				<li><a href="reviews.html">Reviews</a></li>
				<li><a href="about_us.html">About Us</a></li>
				<li><span id="current-date"></span></li>
			</ul>
		</nav>
	</header>
<main>
  <h1>Reviews</h1>
  
  <form>
    <label for="name">Name:</label>
    <input type="text" id="name" required><br>
    
    <label for="comment">Comment:</label>
    <textarea id="comment" required></textarea><br>
    
    <button type="button" onclick="addReview()">Add review</button>
  </form>
  
  <ul id="review-list"></ul>
</main>
	<footer>
		<p>&copy; 2023 Travel To 5 Places. All rights reserved.</p>
	</footer>
</body>
</html>